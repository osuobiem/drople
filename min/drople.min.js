function manip(e){screen.width>=768?drople.offsetWidth<=screen.width/2&&drople.offsetWidth>screen.width/3?e.setAttribute("class","drople-img d-col-3"):drople.offsetWidth>screen.width/2&&drople.offsetWidth<=screen.width?e.setAttribute("class","drople-img d-col-2"):drople.offsetWidth<screen.width/2&&drople.offsetWidth>=screen.width/5?e.setAttribute("class","drople-img d-col-4"):drople.offsetWidth<screen.width/5&&e.setAttribute("class","drople-img d-col-12"):drople.offsetWidth<=screen.width/2?e.setAttribute("class","drople-img d-col-12"):e.setAttribute("class","drople-img d-col-4"),w=e.offsetWidth,e.setAttribute("style","height: "+w+"px; "+e.getAttribute("style"))}function render(e){type=e.type,type1=type.split("/")[0],type2=type.split("/")[1];let t=document.createElement("div"),d=document.createElement("img");if("application"==type1&&"pdf"==type2)d.src="placeholders/pdf.png";else if("image"==type1){let t=new FileReader;t.readAsDataURL(e),t.onload=(()=>{d.src=t.result})}else"video"==type1?d.src="placeholders/video.png":"audio"==type1?d.src="placeholders/audio.png":d.src="placeholders/file.jpg";t.classList.add("drople-img"),t.appendChild(d),first&&(document.getElementById("drop-msg").hidden="true",first=!1),drople.appendChild(t),manip(t),upload(e,t)}function drop(e){e.target.classList.remove("drop-op"),files=e.dataTransfer.files,"single"===mode?render(files[0]):[...files].forEach(render)}function upload(e,t){let d=document.createElement("div");d.setAttribute("class","loader");let r=document.createElement("span");r.setAttribute("style","width: 0");let s=document.createElement("span");s.setAttribute("class","status-e"),s.innerHTML="&#10006;";let l=document.createElement("span");l.setAttribute("class","e-message");let n=document.createElement("span");n.setAttribute("class","status-s"),n.innerHTML="&#10004;";let i=new FormData;i.append("file",e);let o=new XMLHttpRequest;o.open("POST",url,!0),o.upload.addEventListener("loadstart",()=>{d.appendChild(r),t.prepend(d)}),o.upload.addEventListener("progress",e=>{prog=Math.round(e.loaded/e.total*100),r.setAttribute("style","width: "+prog+"%")}),o.upload.addEventListener("loadend",()=>{o.onreadystatechange=(()=>{4==o.readyState&&200==o.status&&(d.hidden=!0,t.prepend(n)),0==o.status&&(d.hidden=!0,l.innerHTML="Error: Could not upload file",t.prepend(l),t.prepend(s))})}),o.upload.addEventListener("error",()=>{d.hidden=!0,l.innerHTML="Error: Could not upload file",t.prepend(l),t.prepend(s)}),o.send(i)}{scripts=document.getElementsByTagName("script"),src=scripts[scripts.length-1].src,src=src.split("/"),src.pop(),src=src.join("/");let e=document.createElement("link");e.rel="stylesheet",e.href=src+"/drople.min.css",document.head.appendChild(e)}let drople=document.getElementById("drople"),first=!0;const mode=drople.getAttribute("d-mode"),url=drople.getAttribute("d-url");{let e=document.createElement("p");e.id="drop-msg",e.innerHTML="Drop file here OR Click to select",drople.appendChild(e)}{let e=document.createElement("input");e.id="file",e.type="file",e.hidden=!0,drople.appendChild(e),"single"===mode?e.addEventListener("change",e=>{render(e.target.files[0])}):(e.multiple=!0,e.addEventListener("change",e=>{[...e.target.files].forEach(e=>{render(e)})})),drople.addEventListener("click",()=>{e.click()})}{function preventDefaults(e){e.preventDefault(),e.stopPropagation()}["dragenter","dragover"].forEach(e=>{drople.addEventListener(e,preventDefaults,!1)}),["dragleave","drop"].forEach(e=>{drople.addEventListener(e,preventDefaults,!1)}),drople.addEventListener("drop",drop,!1)}